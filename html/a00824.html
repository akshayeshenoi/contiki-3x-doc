<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Contiki 3.x: cpu/avr/radio/mac/sicslowmac.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Contiki 3.x
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00824.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sicslowmac.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><pre class="fragment">    Example glue code between the existing MAC code and the
    Contiki mac interface
</pre>  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;contiki.h&quot;</code><br />
<code>#include &quot;<a class="el" href="a00589_source.html">dev/radio.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="a01399_source.html">frame.h</a>&quot;</code><br />
</div>
<p><a href="a00824_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2bf3d677cabadcec332019d8d42c8eda"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00824.html#a2bf3d677cabadcec332019d8d42c8eda">mac_event_pending</a> (void)</td></tr>
<tr class="memdesc:a2bf3d677cabadcec332019d8d42c8eda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for any pending events in the queue.  <a href="#a2bf3d677cabadcec332019d8d42c8eda">More...</a><br /></td></tr>
<tr class="separator:a2bf3d677cabadcec332019d8d42c8eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a546b1497ed4c233b1bbfcc34c0b386be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00824.html#a546b1497ed4c233b1bbfcc34c0b386be">mac_put_event</a> (event_object_t *object)</td></tr>
<tr class="memdesc:a546b1497ed4c233b1bbfcc34c0b386be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts an event into the queue of events.  <a href="#a546b1497ed4c233b1bbfcc34c0b386be">More...</a><br /></td></tr>
<tr class="separator:a546b1497ed4c233b1bbfcc34c0b386be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80999c6d92ebf45c7cf293881fc6f58f"><td class="memItemLeft" align="right" valign="top">event_object_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00824.html#a80999c6d92ebf45c7cf293881fc6f58f">mac_get_event</a> (void)</td></tr>
<tr class="memdesc:a80999c6d92ebf45c7cf293881fc6f58f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pulls an event from the event queue.  <a href="#a80999c6d92ebf45c7cf293881fc6f58f">More...</a><br /></td></tr>
<tr class="separator:a80999c6d92ebf45c7cf293881fc6f58f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a949561586ee469839f64be7d89575343"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00824.html#a949561586ee469839f64be7d89575343">mac_task</a> (process_event_t ev, process_data_t data)</td></tr>
<tr class="memdesc:a949561586ee469839f64be7d89575343"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the main loop task for the MAC.  <a href="#a949561586ee469839f64be7d89575343">More...</a><br /></td></tr>
<tr class="separator:a949561586ee469839f64be7d89575343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86ab5f7a2d73b6b326063eba1b08ff83"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00824.html#a86ab5f7a2d73b6b326063eba1b08ff83">sicslowmac_dataRequest</a> (void)</td></tr>
<tr class="memdesc:a86ab5f7a2d73b6b326063eba1b08ff83"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the implementation of the 15.4 MAC Data Request primitive.  <a href="#a86ab5f7a2d73b6b326063eba1b08ff83">More...</a><br /></td></tr>
<tr class="separator:a86ab5f7a2d73b6b326063eba1b08ff83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec7934ef1bb991bc484c8f74033bb4cf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00824.html#aec7934ef1bb991bc484c8f74033bb4cf">sicslowmac_resetRequest</a> (bool setDefaultPIB)</td></tr>
<tr class="memdesc:aec7934ef1bb991bc484c8f74033bb4cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the implementation of the 15.4 MAC Reset Request primitive.  <a href="#aec7934ef1bb991bc484c8f74033bb4cf">More...</a><br /></td></tr>
<tr class="separator:aec7934ef1bb991bc484c8f74033bb4cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">    Example glue code between the existing MAC code and the
    Contiki mac interface
</pre> <dl class="section author"><dt>Author</dt><dd>Adam Dunkels <a href="#" onclick="location.href='mai'+'lto:'+'ada'+'m@'+'sic'+'s.'+'se'; return false;">adam@<span style="display: none;">.nosp@m.</span>sics<span style="display: none;">.nosp@m.</span>.se</a> Eric Gnoske <a href="#" onclick="location.href='mai'+'lto:'+'egn'+'os'+'ke@'+'gm'+'ail'+'.c'+'om'; return false;">egnos<span style="display: none;">.nosp@m.</span>ke@g<span style="display: none;">.nosp@m.</span>mail.<span style="display: none;">.nosp@m.</span>com</a> Blake Leverett <a href="#" onclick="location.href='mai'+'lto:'+'ble'+'ve'+'ret'+'t@'+'gma'+'il'+'.co'+'m'; return false;">bleve<span style="display: none;">.nosp@m.</span>rett<span style="display: none;">.nosp@m.</span>@gmai<span style="display: none;">.nosp@m.</span>l.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p>Definition in file <a class="el" href="a00824_source.html">sicslowmac.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2bf3d677cabadcec332019d8d42c8eda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mac_event_pending </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for any pending events in the queue. </p>
<dl class="section return"><dt>Returns</dt><dd>True if there is a pending event, else false. </dd></dl>

<p>Definition at line <a class="el" href="a00822_source.html#l00122">122</a> of file <a class="el" href="a00822_source.html">sicslowmac.c</a>.</p>

<p>Referenced by <a class="el" href="a00822_source.html#l00193">mac_task()</a>.</p>

</div>
</div>
<a class="anchor" id="a80999c6d92ebf45c7cf293881fc6f58f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">event_object_t* mac_get_event </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pulls an event from the event queue. </p>
<p>Assumes that there is an event in the queue. See <a class="el" href="a00822.html#a2bf3d677cabadcec332019d8d42c8eda" title="Checks for any pending events in the queue. ">mac_event_pending()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the event object, or NULL in the event of empty queue. </dd></dl>

<p>Definition at line <a class="el" href="a00822_source.html#l00162">162</a> of file <a class="el" href="a00822_source.html">sicslowmac.c</a>.</p>

<p>References <a class="el" href="a00822_source.html#l00193">mac_task()</a>, and <a class="el" href="a01872_source.html#l00186">NULL</a>.</p>

<p>Referenced by <a class="el" href="a00822_source.html#l00193">mac_task()</a>.</p>

</div>
</div>
<a class="anchor" id="a546b1497ed4c233b1bbfcc34c0b386be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mac_put_event </td>
          <td>(</td>
          <td class="paramtype">event_object_t *&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts an event into the queue of events. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object</td><td>is a pointer to the event to add to queue. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00822_source.html#l00133">133</a> of file <a class="el" href="a00822_source.html">sicslowmac.c</a>.</p>

<p>Referenced by <a class="el" href="a01089_source.html#l00160">radio_init()</a>, and <a class="el" href="a01398_source.html#l00255">rx_frame_parse()</a>.</p>

</div>
</div>
<a class="anchor" id="a949561586ee469839f64be7d89575343"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mac_task </td>
          <td>(</td>
          <td class="paramtype">process_event_t&#160;</td>
          <td class="paramname"><em>ev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">process_data_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the main loop task for the MAC. </p>
<p>Called by the main application loop. </p>

<p>Definition at line <a class="el" href="a00822_source.html#l00193">193</a> of file <a class="el" href="a00822_source.html">sicslowmac.c</a>.</p>

<p>References <a class="el" href="a02095_source.html#l00256">LSB</a>, <a class="el" href="a00822_source.html#l00122">mac_event_pending()</a>, <a class="el" href="a00822_source.html#l00162">mac_get_event()</a>, <a class="el" href="a02095_source.html#l00257">MSB</a>, <a class="el" href="a00852_source.html#l00076">packetbuf_clear()</a>, <a class="el" href="a00852_source.html#l00085">packetbuf_copyfrom()</a>, <a class="el" href="a00852_source.html#l00151">packetbuf_set_datalen()</a>, and <a class="el" href="a00700_source.html#l00151">UIP_LLADDR_LEN</a>.</p>

<p>Referenced by <a class="el" href="a00822_source.html#l00162">mac_get_event()</a>, and <a class="el" href="a00822_source.html#l00592">PROCESS_THREAD()</a>.</p>

</div>
</div>
<a class="anchor" id="a86ab5f7a2d73b6b326063eba1b08ff83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sicslowmac_dataRequest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the implementation of the 15.4 MAC Data Request primitive. </p>
<dl class="section return"><dt>Returns</dt><dd>Integer denoting success or failure. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Failure. </td></tr>
    <tr><td class="paramname">1</td><td>Success. <pre class="fragment">        The data request primitive creates the frame header based
        on static and dynamic data. The static data will be refined
        in phase II of the project. The frame payload and length are
        retrieved from the rime buffer and rime length respectively.

        When the header and payload are assembled into the
        frame_create_params structure, the frame is created
        by a call to frame_tx_create and then transmited via
        radio_send_data.</pre> </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="a00002.html#_todo000004">Todo:</a></b></dt><dd>For phase 1 the addresses are all long. We'll need a mechanism in the rime attributes to tell the mac to use long or short for phase 2. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="a00002.html#_todo000005">Todo:</a></b></dt><dd>: Fix delay in sicslowmac so they do not block receiving </dd></dl>

<p>Definition at line <a class="el" href="a00822_source.html#l00396">396</a> of file <a class="el" href="a00822_source.html">sicslowmac.c</a>.</p>

<p>References <a class="el" href="a01399_source.html#l00074">fcf_t::ackRequired</a>, <a class="el" href="a01399_source.html#l00147">addr_t::addr16</a>, <a class="el" href="a01399_source.html#l00148">addr_t::addr64</a>, <a class="el" href="a01399_source.html#l00166">frame_create_params_t::dest_addr</a>, <a class="el" href="a01399_source.html#l00165">frame_create_params_t::dest_pid</a>, <a class="el" href="a01399_source.html#l00077">fcf_t::destAddrMode</a>, <a class="el" href="a01399_source.html#l00163">frame_create_params_t::fcf</a>, <a class="el" href="a01399_source.html#l00154">frame_result_t::frame</a>, <a class="el" href="a01398_source.html#l00119">frame_tx_create()</a>, <a class="el" href="a01399_source.html#l00073">fcf_t::framePending</a>, <a class="el" href="a01399_source.html#l00071">fcf_t::frameType</a>, <a class="el" href="a01399_source.html#l00078">fcf_t::frameVersion</a>, <a class="el" href="a01394_source.html#l00067">ieee_15_4_manager::get_dst_panid</a>, <a class="el" href="a01394_source.html#l00082">ieee_15_4_manager::get_long_addr</a>, <a class="el" href="a01394_source.html#l00072">ieee_15_4_manager::get_src_panid</a>, <a class="el" href="a01399_source.html#l00155">frame_result_t::length</a>, <a class="el" href="a00809_source.html#l00116">macDSN</a>, <a class="el" href="a00852_source.html#l00170">packetbuf_datalen()</a>, <a class="el" href="a00852_source.html#l00158">packetbuf_dataptr()</a>, <a class="el" href="a00852_source.html#l00248">packetbuf_holds_broadcast()</a>, <a class="el" href="a01399_source.html#l00075">fcf_t::panIdCompression</a>, <a class="el" href="a01399_source.html#l00170">frame_create_params_t::payload</a>, <a class="el" href="a01399_source.html#l00171">frame_create_params_t::payload_len</a>, <a class="el" href="a01089_source.html#l01015">radio_send_data()</a>, <a class="el" href="a00590_source.html#l00106">RADIO_SUCCESS</a>, <a class="el" href="a00590_source.html#l00110">RADIO_WRONG_STATE</a>, <a class="el" href="a01399_source.html#l00072">fcf_t::securityEnabled</a>, <a class="el" href="a01399_source.html#l00164">frame_create_params_t::seq</a>, <a class="el" href="a01399_source.html#l00168">frame_create_params_t::src_addr</a>, <a class="el" href="a01399_source.html#l00167">frame_create_params_t::src_pid</a>, and <a class="el" href="a01399_source.html#l00079">fcf_t::srcAddrMode</a>.</p>

<p>Referenced by <a class="el" href="a00822_source.html#l00592">PROCESS_THREAD()</a>.</p>

</div>
</div>
<a class="anchor" id="aec7934ef1bb991bc484c8f74033bb4cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sicslowmac_resetRequest </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>setDefaultPIB</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the implementation of the 15.4 MAC Reset Request primitive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">setDefaultPIB</td><td>True if the default PIB values should be set. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Integer denoting success or failure. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Failure. </td></tr>
    <tr><td class="paramname">1</td><td>Success. <pre class="fragment">        Sets all PIB values to default.</pre> </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="a00002.html#_todo000006">Todo:</a></b></dt><dd>This might be read from the serial eeprom onboard Raven. </dd></dl>

<p>Definition at line <a class="el" href="a00822_source.html#l00559">559</a> of file <a class="el" href="a00822_source.html">sicslowmac.c</a>.</p>

<p>References <a class="el" href="a01401_source.html#l00313">AVR_ENTER_CRITICAL_REGION</a>, <a class="el" href="a01401_source.html#l00317">AVR_LEAVE_CRITICAL_REGION</a>, <a class="el" href="a00809_source.html#l00104">macCoordShortAddress</a>, <a class="el" href="a00809_source.html#l00116">macDSN</a>, <a class="el" href="a00809_source.html#l00122">macDstPANId</a>, <a class="el" href="a00809_source.html#l00145">macLongAddr</a>, <a class="el" href="a00809_source.html#l00139">macShortAddress</a>, <a class="el" href="a00809_source.html#l00128">macSrcPANId</a>, and <a class="el" href="a00964_source.html#l00307">PROCESS</a>.</p>

<p>Referenced by <a class="el" href="a00809_source.html#l00153">mac_init()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c433b04169c945a1c7f0848f853d4379.html">cpu</a></li><li class="navelem"><a class="el" href="dir_bcc0b3bc564a71f69a504b5999905a60.html">avr</a></li><li class="navelem"><a class="el" href="dir_6dbece4d6b8367f1720dbc6b0fdf37ed.html">radio</a></li><li class="navelem"><a class="el" href="dir_5e22d08c9924a46a73c0e5403ca43875.html">mac</a></li><li class="navelem"><a class="el" href="a00824.html">sicslowmac.h</a></li>
    <li class="footer">Generated on Fri Mar 11 2022 12:06:07 for Contiki 3.x by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
