<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Contiki 3.x: SICSLoWMAC Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Contiki 3.x
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a02848.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SICSLoWMAC Implementation<div class="ingroups"><a class="el" href="a02832.html">Contiki CPUs</a> &raquo; <a class="el" href="a02833.html">AVR</a> &raquo; <a class="el" href="a02834.html">Wireless</a> &raquo; <a class="el" href="a02639.html">RF230 MAC</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="macintro"></a>
1. Introduction</h1>
<p>The phase1 MAC implemented to support the IPv6/6LoWPAN stack within the Contiki project is a light weight yet adequate beginning. This phase supports point to point data connectivity between a router device and an end device. The router is the RZ USB stick from the ATAVRRZRAVEN kit. The end node is the AVR Raven from the ATAVRRZRAVEN kit. The picture below shows the complete ATAVRRZRAVEN kit. </p><pre class="fragment">\image html raven.png
</pre><p>The next phases will implement a commissioning concept including scan, and beacon generation. These kinds of primitives will allow dynamic network formation. Additionally, routing and low power/sleep will be implemented in following phases.</p>
<h1><a class="anchor" id="macprereqs"></a>
2. Prerequisites</h1>
<p>See the <a class="el" href="a02841.html">Running Contiki with uIPv6 and SICSlowpan support on Atmel RAVEN hardware</a> for required systems setup configuration.</p>
<h1><a class="anchor" id="macoverview"></a>
3. MAC Overview</h1>
<p>This MAC follows the recommendations of RFC4944 with respect to data frames and acknowledgements (i.e. all data frames are acknowledged). At the time of this writing (phase 1) beacons (frames) and association events are not implemented. Additionally, data frames always carry both source and destination addresses. PANID compression (intra-pan) is not used so both source and destination PANID's are present in the frame.</p>
<p>The SICSLoWMAC supports the IEEE 802.15.4 Data Request primitive and the Data Request Indication primitive. The data request primitive constructs a <b>proper</b> 802.15.4 frame for transmission over the air while the data indication parses a received frame for processing in higher layers (6LoWPAN). The source code for the mac can be found in the sicslowmac.[c,h] files.</p>
<p>To assemble a frame a MAC header is constructed with certain presumptions:</p><ol type="1">
<li>Long source and destination addresses are used.</li>
<li>A hard coded PANID is used.</li>
<li>A hard coded channel is used.</li>
<li>Acknowledgements are used.</li>
<li>Up to 3 auto retry attempts are used.</li>
</ol>
<p>These and other variables are defined in <a class="el" href="a00810.html" title="    MAC driver header file  ">mac.h</a>.</p>
<p>Given this data and the output of the 6LoWPAN function, the MAC can construct the data frame and the Frame Control Field for transmission.</p>
<p>An IEEE 802.15.4 MAC data frame consists of the fields shown below: </p><pre class="fragment">\image html dataframe.png
</pre><p>The Frame Control Field (FCF) consist of the fields shown below: </p><pre class="fragment">\image html fcf.jpg

\note The MAC address of each node is expected to be stored in EEPROM and
</pre><p> retrieved during the initialization process immediately after power on.</p>
<h1><a class="anchor" id="macrelationship"></a>
4. 6LoWPAN, MAC and Radio Relationship</h1>
<p>The output function of the 6LoWPAN layer (<a class="el" href="a00758.html" title="    6lowpan implementation (RFC4944 and draft-ietf-6lowpan-hc-06) ">sicslowpan.c</a>) is the input function to the MAC (sicslowmac.c). The output function of the MAC is the input function of the radio (radio.c). When the radio receives a frame over the air it processes it in its TRX_END event function. If the frame passes address and CRC filtering it is queued in the MAC event queue. Subsequently, when the MAC task is processed, the received frame is parsed and handed off to the 6LoWPAN layer via its input function. These relationships are depicted below: </p><pre class="fragment">\image html layers.png
</pre><h1><a class="anchor" id="maccode"></a>
5. Source Code Location</h1>
<p>The source code for the MAC, Radio and support functions is located in the path:</p><ul>
<li>\cpu\avr\radio<ul>
<li>\rf230</li>
<li>\mac</li>
<li>\ieee-manager</li>
</ul>
</li>
</ul>
<ol type="1">
<li>The \rf230 folder contains the low level HAL drivers to access and control the radio as well as the low level frame formatting and parsing functions.</li>
<li>The \mac folder contains the MAC layer code, the generic MAC initialization functions and the defines mentioned in section 3.</li>
<li>The \ieee-manager folder contains the access functions for various PIB variables and radio functions such as channel setting.</li>
</ol>
<p>The source code for the Raven platforms is located in the path:</p><ul>
<li>\platform<ul>
<li>\avr-raven</li>
<li>\avr-ravenlcd</li>
<li>\avr-ravenusb</li>
</ul>
</li>
</ul>
<ol type="1">
<li>The \avr-raven folder contains the source code to initialize and start the raven board.</li>
<li>The \avr-ravenlcd folder contains the complete source code to initialize and start the ATmega3209P on raven board in a user interface capacity. See the Doxygen generated documentation for more information.</li>
<li>The \avr-ravenusb folder contains the source code to initialize and start the raven USB stick as a network interface on either Linux or Windows platforms. Note that appropriate drivers are located in the path:<ul>
<li>\cpu\avr\dev\usb\INF</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="macavrstudio"></a>
6. AVR Studio Project Location</h1>
<p>There are two projects that utilize the Logo Certified IPv6 and 6LoWPAN layers contributed to the Contiki project by Cisco. These are ping-ipv6and webserver-ipv6 applications. They are located in the following paths:</p><ul>
<li>\examples\webserver-ipv6 and</li>
<li>\examples\ping-ipv6</li>
</ul>
<p>The ping-ipv6 application will allow the USB stick to ping the Raven board while the webserver-ipv6 application will allow the raven board to serve a web page. When the ravenlcd-3290 application is programmed into the ATmega3290P on the Raven board, the Raven board can ping the USB stick and it can periodically update the temperature in the appropriate web page when served. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Mar 11 2022 12:06:09 for Contiki 3.x by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
